#!/bin/bash

###########################
#(C) Will Cunningham 2014 #
# Krioukov Research Group #
# Northeastern University #
###########################

# Prevents re-compiling during a long run
#mv Makefile Makefile~

#####################################
# These are experimental parameters #
#####################################

# Measure properties of 1+1 de Sitter
#./bin/CausalSet --nodes 10240 --degrees 5.53 --dim 1 --components --print

# Measure properties of 3+1 de Sitter
#./bin/CausalSet --nodes 10240 --degrees 10 --radius 2.0 --gpu --print

# Measure properties of Universe
#./bin/CausalSet --flrw --nodes 1048576 --age 4.0 --delta 1.0 --radius 1.0 --seed 18100 --verbose -y --gpu

samples=1
for (( i=1; i<=${samples}; i++ ))
do
  echo Trial $i of ${samples}
#  ./bin/CausalSet --nodes 20480 --degrees 10 --radius 0.8 --seed 18100 --link --compact --verbose -y --gpu --embedding 1
  ./bin/CausalSet --flrw --nodes 10240 --degrees 10 --energy 0.7 --compact --link --seed 18100 --gpu --embedding 0.001
#  ./bin/CausalSet --flrw --nodes 10240 --degrees 10 --energy 0.5 --link --seed 18100 --gpu --success 0.001
done

######################################
# These will reproduce known results #
######################################

# Generate causal set for 1+1 de Sitter (no matter)
#./bin/CausalSet --nodes 24586 --degrees 5.53 --dim 1 --seed 18100 --verbose
# Should find eta0 = 1.5707577, gamma = 2

# Generate causal set for 3+1 de Sitter (no matter)
#./bin/CausalSet --nodes 25441 --degrees 5.29 --radius 2.0 --seed 18100 -y --verbose
# Should find eta0 = 1.5296963, gamma = 1.75

# Generate causal set for universe (mix of dark energy and matter)
#./bin/CausalSet --flrw --age 0.8458 --alpha 2.01 --delta 10000 --seed 18100 -y --print --verbose &> causet.log &
# Should find N = 10^6, tau given by (12), in-degree given by Fig. (S3), out-degree given by Fig. (3a)
# Note this takes ~ 3.5 days to run!!!

# Read hyperbolic graph data and perform greedy routing algorithm
#./bin/CausalSet --dim 1 --manifold h --seed 18100 --graph 321 -y --verbose --success 1
# Should find a success ratio of 1.0 and a single connected component

# Compare to Dima's Fortran Code
# Make sure to manually alter parameters in fortran code and re-compile!
#./bin/CausalSet --flrw --age 1.5 --delta 1 --radius 1 --gpu --graph 22222 --components
#./etc/dk_stats_direct.pl 22222

#mv Makefile~ Makefile
